# Dokumentasi Alur & Struktur Website Inventaris MSU

Dokumentasi ini menjelaskan alur penggunaan website untuk ketiga role (Guest, Pengelola, Pengurus) beserta pemetaan file dan direktori yang relevan.

## 1. Overview Role

Project ini membagi hak akses menjadi 3 kategori utama:

1.  **Guest (Mahasiswa/Umum)**:
    *   Mengakses halaman publik.
    *   Melihat katalog barang/ruangan.
    *   Melakukan peminjaman (add to cart -> checkout).
    *   Mendapatkan struk peminjaman.

2.  **Pengelola (Administrator Utama)**:
    *   Login dengan kode 2FA (Email).
    *   Mengelola inventaris (Tambah/Hapus/Edit Barang & Ruangan).
    *   Approval Peminjaman (Menyetujui/Menolak request dari Guest).
    *   Melihat Laporan Statistik & Export Data.

3.  **Pengurus (Operasional/Logistik)**:
    *   Login dengan kode 2FA (Email).
    *   Memproses peminjaman harian (Barang keluar/masuk).
    *   Verifikasi pengambilan dan pengembalian barang.
    *   Melihat Dashboard aktivitas harian.

---

## 2. Alur Website & Struktur File

Berikut adalah detail flow untuk setiap fitur utama beserta file backend (Livewire/Controller) dan frontend (Blade View) yang menanganinya.

### A. Authentication (Login)

Sistem login menggunakan standar Laravel Fortify.

*   **Alur**:
    1.  User akses halaman Login.
    2.  Memilih role (Pengelola / Pengurus) - *Note: Secara teknis login unified, role ditentukan dari database*.
    3.  Input Email & Password.
    4.  Jika valid -> Redirect ke Dashboard sesuai role.

*   **File Terkait**:
    *   **Route**: Handled by Fortify (internal).
    *   **Views**: `resources/views/livewire/auth/login.blade.php`

---

### B. Flow Guest (Peminjaman)

Guest tidak perlu login. Data peminjaman disimpan dalam sesi (Session) hingga checkout.

1.  **Beranda (Home)**
    *   Halaman: Landing page utama.
    *   Logic: `app/Livewire/Guest/Home.php`
    *   View: `resources/views/livewire/guest/home.blade.php`

2.  **Katalog (Catalogue)**
    *   Fitur: Filtering kategori (Barang/Ruangan), Search, Add to Cart.
    *   Logic: `app/Livewire/Guest/Catalogue.php`
    *   View: `resources/views/livewire/catalogue/catalogue.blade.php`

3.  **Keranjang & Checkout (Cart)**
    *   Fitur: Review item, input tanggal pinjam, upload proposal, isi biodata, Checkout.
    *   Logic: `app/Livewire/Guest/Cart.php` (Menggunakan Trait `HandlesCart` & `HandlesLoanTime`)
    *   View: `resources/views/livewire/guest/cart.blade.php`
    *   Helper JS: `public/js/cart.js`, `public/js/barang.js`

4.  **Sukses / Struk**
    *   Fitur: Konfirmasi booking berhasil.
    *   Logic: `app/Livewire/Guest/Success.php`
    *   View: `resources/views/livewire/guest/success.blade.php`

---

### C. Flow Pengelola (Admin Dashboard)

Hana bisa diakses setelah login sebagai **Pengelola**. Fokus pada manajemen data dan approval. Prefix URL: `/pengelola`

1.  **Beranda (Dashboard)**
    *   Overview singkat statistik.
    *   Logic: `app/Livewire/Pengelola/Beranda.php`
    *   View: `resources/views/livewire/pengelola/beranda.blade.php`

2.  **Approval (Persetujuan)**
    *   Fitur: Menerima/Menolak request pinjam yang masuk.
    *   Logic: `app/Livewire/Pengelola/Approval.php`
    *   View: `resources/views/livewire/pengelola/approval.blade.php`

3.  **Manajemen Inventaris (Tambah/Hapus)**
    *   Fitur: CRUD Barang & Ruangan.
    *   Logic: `app/Livewire/Pengelola/TambahHapus.php`
    *   View: `resources/views/livewire/pengelola/tambah-hapus.blade.php`

4.  **Laporan (Reporting)**
    *   Fitur: Tabel history lengkap, filter, chart statistik, export Excel/PDF.
    *   Logic: `app/Livewire/Pengelola/Laporan.php`
    *   View: `resources/views/livewire/pengelola/laporan.blade.php`
    *   Export Controller: `app/Http/Controllers/Pengelola/LaporanExportController.php`

---

### D. Flow Pengurus (Operasional)

Hanya bisa diakses setelah login sebagai **Pengurus**. Fokus pada eksekusi lapangan. Prefix URL: `/pengurusinventoryMSU`

1.  **Dashboard Operasional**
    *   Overview barang yang harus disiapkan/kembali hari ini.
    *   Logic: `app/Livewire/Pengurus/Dashboard.php`
    *   View: `resources/views/livewire/pengurus/dashboard.blade.php`

2.  **Peminjaman Fasilitas (Serah Terima)**
    *   Fitur: Mengubah status barang (Disiapkan -> Diambil -> Dikembalikan).
    *   Logic: `app/Livewire/Pengurus/PeminjamanFasilitas.php`
    *   View: `resources/views/livewire/pengurus/peminjaman-fasilitas.blade.php`

3.  **Riwayat Transaksi**
    *   Fitur: Log aktivitas barang keluar masuk.
    *   Logic: `app/Livewire/Pengurus/Riwayat.php`
    *   View: `resources/views/livewire/pengurus/riwayat.blade.php`

---

## 3. Direktori Penting Lainnya

*   **Config**:
    *   `config/fortify.php`: Konfigurasi dasar auth.
    *   `config/mail.php`: Konfigurasi SMTP/Mailtrap.
*   **Database**:
    *   `database/migrations/`: Struktur tabel database (Users, Inventories, LoanRequests).
*   **Assets**:
    *   `public/aset/`: Gambar statis (logo, ilustrasi role).
    *   `public/js/`: Kustom JavaScript logic.
